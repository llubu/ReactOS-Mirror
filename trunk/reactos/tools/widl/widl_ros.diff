--- hash.c	Fri Sep 29 17:48:44 2006
+++ hash.c	Sat Jan 05 21:25:37 2008
@@ -533,17 +533,24 @@
   case LANG_ROMANIAN:   case LANG_SANSKRIT:   case LANG_SERBIAN:
   case LANG_SINDHI:     case LANG_SLOVENIAN:  case LANG_SWAHILI:
   case LANG_SWEDISH:    case LANG_SYRIAC:     case LANG_TAMIL:
   case LANG_TATAR:      case LANG_TELUGU:     case LANG_THAI:
   case LANG_UKRAINIAN:  case LANG_URDU:       case LANG_UZBEK:
+#ifndef __REACTOS__
   case LANG_VIETNAMESE: case LANG_GAELIC:     case LANG_MALTESE:
   case LANG_TAJIK:      case LANG_ROMANSH:    case LANG_IRISH:
   case LANG_SAMI:       case LANG_UPPER_SORBIAN: case LANG_SUTU:
   case LANG_TSONGA:     case LANG_TSWANA:     case LANG_VENDA:
   case LANG_XHOSA:      case LANG_ZULU:       case LANG_ESPERANTO:
   case LANG_WALON:      case LANG_CORNISH:    case LANG_WELSH:
   case LANG_BRETON:
+#else
+  case LANG_VIETNAMESE: case LANG_MALTESE:    case LANG_IRISH:
+  case LANG_SAMI:       case LANG_UPPER_SORBIAN:  case LANG_TSWANA:
+  case LANG_XHOSA:      case LANG_ZULU:       case LANG_WELSH:
+  case LANG_BRETON:
+#endif
     nOffset = 16;
     pnLookup = Lookup_16;
     break;
   case LANG_CZECH:  case LANG_HUNGARIAN:  case LANG_POLISH:
   case LANG_SLOVAK: case LANG_SPANISH:
--- server.c	Sat Jan 05 20:48:36 2008
+++ server.c	Sat Jan 05 22:44:57 2008
@@ -388,10 +388,11 @@
         error("Could not open %s for output\n", server_name);
 
     print_server("/*** Autogenerated by WIDL %s from %s - Do not edit ***/\n", PACKAGE_VERSION, input_name);
     print_server("#include <string.h>\n");
     fprintf(server, "\n");
+    print_server("#define _SEH_NO_NATIVE_NLG\n");
     print_server("#include \"%s\"\n", header_name);
     fprintf(server, "\n");
 }
 
 
--- widl.c	Sat Jan 05 20:48:36 2008
+++ widl.c	Sat Jan 05 23:44:29 2008
@@ -547,10 +547,15 @@
       return 1;
     }
   }
 
   if(do_header) {
+    if (strrchr(header_name, '\\'))
+        header_token = make_token(strrchr(header_name, '\\') + 1);
+    else if (strrchr(header_name, '/'))
+        header_token = make_token(strrchr(header_name, '/') + 1);
+    else
     header_token = make_token(header_name);
 
     if(!(header = fopen(header_name, "w"))) {
       fprintf(stderr, "Could not open %s for output\n", header_name);
       return 1;
